{"version":3,"file":"validatePassword.js","sources":["../../../music_app_frontend/src/validatePassword.ts"],"sourcesContent":["//containsNumberValidator\nexport function passwordHasNumberValidator(password: string): null | string {\n    //Define const variables\n    const cleanedPassword = password.trim().toLowerCase()\n    const passwordNumberPattern = /[0-9]/;\n\n    //Condition to check against validation rule\n    if (passwordNumberPattern.test(cleanedPassword)) {\n        return null;\n    }\n    return \"The password must contain at least one number.\";\n};\n\n//specialCharacersValidator\nexport function passwordHasSpecialCharacterValidator(password: string): null | string {\n    //Define const variables\n    const cleanedPassword = password.trim().toLowerCase()\n    const passwordSpecialCharacterPattern = /[!@#$%^&*]/;\n\n    //Condition to check against validation rule\n    if (passwordSpecialCharacterPattern.test(cleanedPassword)) {\n        return null;\n    }\n    return \"The password must contain at least one special character.\";\n};\n\n//uppperCaseValidator\nexport function passwordHasUpperCaseValidator(password: string): null | string {\n    //Define const variables\n    const cleanedPassword = password.trim()\n    const passwordUpperCasePattern = /[A-Z]/;\n\n    //Condition to check against validation rule\n    if (passwordUpperCasePattern.test(cleanedPassword)) {\n        return null;\n    }\n    return \"The password must contain at least one upper case letter.\";\n};\n\n//minimumLengthValidator\nexport function passwordminimumLengthValidator(password: string): null | string {\n    //Define const variables\n    const cleanedPassword = password.trim()\n    const lenCleanedPassword = cleanedPassword.length\n\n    //Condition to check against validation rule\n    if (lenCleanedPassword >= 8) {\n        return null;\n    }\n    return \"The password must contain at least 8 characters.\";\n};\n\n//orchestration function\nexport function orchestratePasswordValidator(password: string): string[] | null {\n    //Define empty array for error messages \n    const errorMessages: string[] = [];\n\n    //Call password validator functions\n    const numberError = passwordHasNumberValidator(password);\n    const specialCharError = passwordHasSpecialCharacterValidator(password);\n    const upperCaseError = passwordHasUpperCaseValidator(password);\n    const minLengthError = passwordminimumLengthValidator(password);\n\n    if (numberError) errorMessages.push(numberError);\n    if (specialCharError) errorMessages.push(specialCharError);\n    if (upperCaseError) errorMessages.push(upperCaseError);\n    if (minLengthError) errorMessages.push(minLengthError);\n\n    return errorMessages.length > 0 ? errorMessages : null;\n\n};\n\n\n//Integrate these functions into HTML page + Django form\ndocument.addEventListener(\"DOMContentLoaded\", (): void => {\n    //Define const variables\n    const form = document.getElementById(\"auth-form\") as HTMLFormElement;\n    const passwordError = document.getElementById(\"password-error\") as HTMLDivElement;\n\n    //Get all passwordFields\n    const passwordFields: NodeListOf<HTMLInputElement> = \n        form.querySelectorAll<HTMLInputElement>('input[type=\"password\"]');\n\n    //Check that all const exist\n    if (!form || passwordFields.length === 0 || !passwordError) {\n        console.warn('Required elements not found:', {\n            form: !!form,\n            passwordFieldsCount: passwordFields.length,\n            passwordError: !!passwordError\n        });\n        return;\n    }\n\n    //Perform validation on form once user clicks \"submit\"\n    form.addEventListener(\"submit\", (event: SubmitEvent): void => {\n        let hasErrors = false;\n        const allErrors: string[] = [];\n\n        // Validate each password field\n        passwordFields.forEach((field: HTMLInputElement): void => {\n            const errors = orchestratePasswordValidator(field.value);\n\n            if (errors) {\n                hasErrors = true;\n                allErrors.push(...errors);\n\n            }\n        });\n\n        // Handle validation results\n        if (hasErrors) {\n            event.preventDefault(); // Stop Django form submission\n            \n            //Clean errors by de-duplicating them\n            const cleanedErrors = [...new Set(allErrors)]\n            passwordError.innerHTML = cleanedErrors.join('<br>'); // Display all errors\n        } else {\n            passwordError.textContent = \"\"; // Clear errors\n        }\n    });\n\n    console.log('passwordValidator initialized');\n});"],"names":["passwordHasNumberValidator","password","cleanedPassword","passwordHasSpecialCharacterValidator","passwordHasUpperCaseValidator","passwordminimumLengthValidator","orchestratePasswordValidator","errorMessages","numberError","specialCharError","upperCaseError","minLengthError","form","passwordError","passwordFields","event","hasErrors","allErrors","field","errors","cleanedErrors"],"mappings":"AACO,SAASA,EAA2BC,EAAiC,CAExE,MAAMC,EAAkBD,EAAS,KAAA,EAAO,YAAA,EAIxC,MAH8B,QAGJ,KAAKC,CAAe,EACnC,KAEJ,gDACX,CAGO,SAASC,EAAqCF,EAAiC,CAElF,MAAMC,EAAkBD,EAAS,KAAA,EAAO,YAAA,EAIxC,MAHwC,aAGJ,KAAKC,CAAe,EAC7C,KAEJ,2DACX,CAGO,SAASE,EAA8BH,EAAiC,CAE3E,MAAMC,EAAkBD,EAAS,KAAA,EAIjC,MAHiC,QAGJ,KAAKC,CAAe,EACtC,KAEJ,2DACX,CAGO,SAASG,EAA+BJ,EAAiC,CAM5E,OAJwBA,EAAS,KAAA,EACU,QAGjB,EACf,KAEJ,kDACX,CAGO,SAASK,EAA6BL,EAAmC,CAE5E,MAAMM,EAA0B,CAAA,EAG1BC,EAAcR,EAA2BC,CAAQ,EACjDQ,EAAmBN,EAAqCF,CAAQ,EAChES,EAAiBN,EAA8BH,CAAQ,EACvDU,EAAiBN,EAA+BJ,CAAQ,EAE9D,OAAIO,GAAaD,EAAc,KAAKC,CAAW,EAC3CC,GAAkBF,EAAc,KAAKE,CAAgB,EACrDC,GAAgBH,EAAc,KAAKG,CAAc,EACjDC,GAAgBJ,EAAc,KAAKI,CAAc,EAE9CJ,EAAc,OAAS,EAAIA,EAAgB,IAEtD,CAIA,SAAS,iBAAiB,mBAAoB,IAAY,CAEtD,MAAMK,EAAO,SAAS,eAAe,WAAW,EAC1CC,EAAgB,SAAS,eAAe,gBAAgB,EAGxDC,EACFF,EAAK,iBAAmC,wBAAwB,EAGpE,GAAI,CAACA,GAAQE,EAAe,SAAW,GAAK,CAACD,EAAe,CACxD,QAAQ,KAAK,+BAAgC,CACzC,KAAM,CAAC,CAACD,EACR,oBAAqBE,EAAe,OACpC,cAAe,CAAC,CAACD,CAAA,CACpB,EACD,MACJ,CAGAD,EAAK,iBAAiB,SAAWG,GAA6B,CAC1D,IAAIC,EAAY,GAChB,MAAMC,EAAsB,CAAA,EAc5B,GAXAH,EAAe,QAASI,GAAkC,CACtD,MAAMC,EAASb,EAA6BY,EAAM,KAAK,EAEnDC,IACAH,EAAY,GACZC,EAAU,KAAK,GAAGE,CAAM,EAGhC,CAAC,EAGGH,EAAW,CACXD,EAAM,eAAA,EAGN,MAAMK,EAAgB,CAAC,GAAG,IAAI,IAAIH,CAAS,CAAC,EAC5CJ,EAAc,UAAYO,EAAc,KAAK,MAAM,CACvD,MACIP,EAAc,YAAc,EAEpC,CAAC,EAED,QAAQ,IAAI,+BAA+B,CAC/C,CAAC"}